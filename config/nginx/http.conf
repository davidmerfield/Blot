log_format access_log_format '[$time_local] $request_id $status $request_time $request_length:$bytes_sent $scheme://$host$request_uri  cache=$sent_http_blot_cache';

error_log /var/www/blot/logs/nginx.error.log info;
access_log /var/www/blot/logs/nginx.log access_log_format;

# Hide the nginx version in the server header
server_tokens off;

# Added to set the content-type charset header 
# for text files served by NGINX
charset utf-8;

include /var/www/blot/config/nginx/static-file.conf;

# Make sure this directory exists
# It does not need to be owned by root
proxy_cache_path  /var/www/blot/data/openresty_cache  levels=1:2 keys_zone=PROXY_CACHE:10m inactive=1y  max_size=10g use_temp_path=off;
lua_shared_dict proxy_cache_keys_by_host 50m;

upstream blot_node {
    server 127.0.0.1:8080;
    keepalive 64;
}

map $http_accept_encoding $gz {
  default "";
  ~*.*gzip.* gzip;
}
