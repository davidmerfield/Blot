# Update the version of Redis

The most important step is to make sure you run Blot's test suite against the new version of redis to catch any obvious breaking changes.

First, work out the version of redis you'd like to use. I do this by visiting [the official website](https://redis.io/download) and selecting the stable version recommended for most users.

The rest of the guide assumes this version happens to be ```6.2.6```.

## In development

First we need to update the redis version in .github/workflows/tests.yml which is used to run the test suite:

```
        redis-version: [6.2.6]
```

Then we do the following on MacOS:

$ wget https://download.redis.io/releases/redis-6.2.6.tar.gz
$ tar xzf redis-6.2.6.tar.gz
$ cd redis-6.2.6
$ make
$ make test
$ make install

Then we do the following on our production server:

$ wget https://download.redis.io/releases/redis-6.2.6.tar.gz
$ tar xzf redis-6.2.6.tar.gz
$ cd redis-6.2.6
$ make
$ make install

Restart the production server:

```
sudo stop redis && sudo start redis
```

and NGINX and Blot:

```
sudo stop blot && sudo start blot
```

```
sudo stop nginx && sudo start nginx
```

Here's the production checklist for the PR:

```
/usr/local/bin/redis-server -version
wget https://download.redis.io/releases/redis-6.2.6.tar.gz
tar xzf redis-6.2.6.tar.gz
cd redis-6.2.6
make
make test
make install
/usr/local/bin/redis-server -version
sudo restart redis
```